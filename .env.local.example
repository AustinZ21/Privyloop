# PrivyLoop Environment Configuration
# 
# ⚠️  IMPORTANT: MONOREPO SETUP INSTRUCTIONS ⚠️
# 
# This is a monorepo with multiple packages. For local development:
# 1. Copy this file to .env.local (for core package and database)
# 2. ALSO copy packages/web/.env.local.example to packages/web/.env.local
# 3. Configure your OAuth credentials in packages/web/.env.local (NOT this file)
# 4. The Next.js web app reads from packages/web/.env.local
# 
# TL;DR: Configure OAuth in packages/web/.env.local, not here!

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Deployment mode: 'self-hosted' or 'cloud'
DEPLOYMENT_MODE=self-hosted

# Environment: 'development', 'staging', 'production'
NODE_ENV=development

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL connection string
DATABASE_URL=postgresql://username:password@localhost:5432/privyloop

# =============================================================================
# AUTHENTICATION CONFIGURATION
# =============================================================================

# Better Auth secret key (generate a strong random string)
BETTER_AUTH_SECRET=your-super-secret-key-here-minimum-32-characters

# Application URL (used for email verification links)
AUTH_URL=http://localhost:3030

# Next.js development server port (to match AUTH_URL above)
PORT=3030

# =============================================================================
# EMAIL CONFIGURATION (Self-Hosted)
# =============================================================================

# Email service configuration for self-hosted deployments
# Choose one: 'nodemailer' (self-hosted) or 'resend' (managed)
EMAIL_PROVIDER=nodemailer

# SMTP Configuration (for self-hosted email)
# Example using Gmail (recommended for development):
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-actual-email@gmail.com
SMTP_PASS=your-gmail-app-password  # Generate at https://myaccount.google.com/apppasswords
# Other providers: Use your provider's SMTP settings

# From email configuration
FROM_NAME=PrivyLoop
FROM_EMAIL=noreply@yourdomain.com

# =============================================================================
# SOCIAL AUTHENTICATION PROVIDERS (Optional)
# =============================================================================
# 
# ⚠️  REMINDER: Configure these in packages/web/.env.local, not here!
#

# GitHub OAuth Setup (5 minutes):
# 1. Go to: https://github.com/settings/applications/new
# 2. App name: "PrivyLoop Local Development"
# 3. Homepage URL: http://localhost:3030
# 4. Authorization callback URL: http://localhost:3030/api/auth/callback/github
## Configure in packages/web/.env.local:
# GITHUB_CLIENT_ID=...
# GITHUB_CLIENT_SECRET=...

# Google OAuth Setup (5 minutes):
# 1. Go to: https://console.cloud.google.com
# 2. Configure OAuth consent screen (External/Internal) in Google Cloud Console
# 3. APIs & Services → Credentials → Create OAuth 2.0 Client ID (Web application)
# 4. Web application type
# 5. Authorized origins: http://localhost:3030
# 6. Authorized redirect URIs: http://localhost:3030/api/auth/callback/google
## Configure in packages/web/.env.local:
# GOOGLE_CLIENT_ID=...
# GOOGLE_CLIENT_SECRET=...

# Microsoft OAuth Setup (optional):
# 1. Go to: https://portal.azure.com/#view/Microsoft_AAD_RegisteredApps/ApplicationsListBlade
# 2. New registration → Web platform
# 3. Redirect URI: http://localhost:3030/api/auth/callback/microsoft
## Configure in packages/web/.env.local:
# MICROSOFT_CLIENT_ID=...
# MICROSOFT_CLIENT_SECRET=...

# OAuth Security Configuration (recommended for production)
# OAUTH_REDIRECT_BASE_URL=https://yourdomain.com  # Override base URL for callbacks
# Note: Callback paths are fixed:
#   - GitHub: /api/auth/callback/github
#   - Google: /api/auth/callback/google
#   - Microsoft: /api/auth/callback/microsoft

# =============================================================================
# EXTERNAL SERVICES (Optional)
# =============================================================================

# AI Service (for privacy analysis)
GEMINI_API_KEY=your-gemini-api-key

# Web scraping fallback
FIRECRAWL_API_KEY=your-firecrawl-api-key